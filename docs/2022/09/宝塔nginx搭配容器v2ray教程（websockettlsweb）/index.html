<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>宝塔Nginx搭配容器V2Ray教程（WebSocket+TLS+Web） - LuoJi.men</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="format-detection" content="telphone=no, email=no">
    <meta name="keywords" content="">
    <meta name="description" itemprop="description" content="参考文档： &nbsp; &nbsp;&nbsp;官方配置指南：WebSocket + TLS + Web | 新 V2Ray 白话文指南 (v2fly.org) &nbsp; &nbsp;&amp;nbsp [&hellip;]">
    <meta name="theme-color" content="#282a2c">
    <meta itemprop="image" content="https://luojimen.github.io/wp-content/themes/kratos-4.1.2/assets/img/default.jpg" />
        <meta name='description' content='参考文档： &nbsp; &nbsp;&nbsp;官方配置指南：WebSocket + TLS + Web | 新 V2Ray 白话文指南 (v2fly.org) &nbsp; &nbsp;&nbsp [&hellip;]' />
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//cdn.seatonjiang.com' />
<link rel='dns-prefetch' href='//push.zhanzhang.baidu.com' />
<link rel='stylesheet' id='urvanov_syntax_highlighter-css'  href='https://luojimen.github.io/wp-content/plugins/urvanov-syntax-highlighter/css/min/urvanov_syntax_highlighter.min.css?ver=2.8.27' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='https://luojimen.github.io/wp-content/plugins/urvanov-syntax-highlighter/themes/classic/classic.css?ver=2.8.27' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='https://luojimen.github.io/wp-content/plugins/urvanov-syntax-highlighter/fonts/monaco.css?ver=2.8.27' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='bootstrap-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/bootstrap.min.css?ver=4.5.0' type='text/css' media='all' />
<link rel='stylesheet' id='kicon-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/iconfont.min.css?ver=4.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='layer-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/layer.min.css?ver=3.1.1' type='text/css' media='all' />
<link rel='stylesheet' id='lightgallery-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/lightgallery.min.css?ver=1.4.0' type='text/css' media='all' />
<link rel='stylesheet' id='kratos-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/style.css?ver=4.1.2' type='text/css' media='all' />
<style id='kratos-inline-css' type='text/css'>

        @media screen and (min-width: 992px) {
            .k-nav .navbar-brand h1 {
                color: #ffffff;
            }
            .k-nav .navbar-nav > li.nav-item > a {
                color: #ffffff;
            }
        }
        
.sticky-sidebar {
                position: sticky;
                top: 8px;
                height: 100%;
            }
</style>
<link rel="alternate" type="application/json+oembed" href="https://luojimen.github.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fluoji.men%2F2022%2F09%2F%25e5%25ae%259d%25e5%25a1%2594nginx%25e6%2590%25ad%25e9%2585%258d%25e5%25ae%25b9%25e5%2599%25a8v2ray%25e6%2595%2599%25e7%25a8%258b%25ef%25bc%2588websockettlsweb%25ef%25bc%2589%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://luojimen.github.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fluoji.men%2F2022%2F09%2F%25e5%25ae%259d%25e5%25a1%2594nginx%25e6%2590%25ad%25e9%2585%258d%25e5%25ae%25b9%25e5%2599%25a8v2ray%25e6%2595%2599%25e7%25a8%258b%25ef%25bc%2588websockettlsweb%25ef%25bc%2589%2F&#038;format=xml" />
<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YQCVEPVH0S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YQCVEPVH0S');
</script>


<!-- 谷歌收录的验证方式 -->
<meta name="google-site-verification" content="XxPfUFFG0MmfvRUNs2AFXHfRXRx_xVLXdD_6Si95rJ0" />
<!-- bing收录验证luojimen.github.io -->
<meta name="msvalidate.01" content="508C6C00EA05098C32CD4DB253B3CB66" />
<!-- baidu收录验证luojimen.github.io -->
<meta name="baidu-site-verification" content="code-DlUhxrKYUP" />		
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-YQCVEPVH0S"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-YQCVEPVH0S');
		</script>

				<script type="text/javascript">
		var _hmt = _hmt || [];
				_hmt.push(['_trackPageview']);
						(function() {
		var hm = document.createElement("script");
		hm.src = "//hm.baidu.com/hm.js?cff4b8fde8a7abf46d402c4fd284f0cc";
		hm.setAttribute('async', 'true');
		document.getElementsByTagName('head')[0].appendChild(hm);
		})();
		</script>
		    <script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/jquery.min.js?ver=3.4.1' id='jquery-js'></script>
    </head>

<body>
    <script type="text/javascript">  
    $(function() {  
    $('.content img').each(function(i){  
        if (! this.parentNode.href) {  
            $(this).wrap("<a href='"+this.src+"' class='highslide-image' onclick='return hs.expand(this);'></a>");  
                                    }  
                                            });  
                });  
    </script> 
    <div class="k-header">
        <nav class="k-nav navbar navbar-expand-lg navbar-light fixed-top" style="background:#1e73be">
            <div class="container">
                <a class="navbar-brand" href="https://luojimen.github.io">
                    <h1>LuoJi.men</h1>                </a>
                                    <button class="navbar-toggler navbar-toggler-right" id="navbutton" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="line first-line"></span>
                        <span class="line second-line"></span>
                        <span class="line third-line"></span>
                    </button>
                <div id="navbarResponsive" class="collapse navbar-collapse"><ul id="menu-menu-1" class="navbar-nav ml-auto"><li class="nav-item" ><a title="主站" href="https://luojimen.github.io/" class="nav-link">主站</a></li>
<li class="nav-item" ><a title="在线工具站" href="https://luojimen.github.io/online-tool-station/" class="nav-link">在线工具站</a></li>
<li class="nav-item" ><a title="运维log" href="https://luojimen.github.io/%e8%bf%90%e7%bb%b4log/" class="nav-link">运维log</a></li>
<li class="nav-item" ><a title="归档时间轴" href="https://luojimen.github.io/time/" class="nav-link">归档时间轴</a></li>
</ul></div>            </div>
        </nav>
            </div>
<div class="k-main color" style="background:#f5f5f5">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 details">
                                    <div class="article">
                        <div class="breadcrumb-box">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a class="text-dark" href="https://luojimen.github.io"> 首页</a>
                                </li>
                                <li class="breadcrumb-item"> <a class="text-dark" href="https://luojimen.github.io/category/linux/">Linux</a></li>                                <li class="breadcrumb-item active" aria-current="page"> 正文</li>
                            </ol>
                        </div>
                        <div class="header">
                            <h1 class="title">宝塔Nginx搭配容器V2Ray教程（WebSocket+TLS+Web）</h1>
                            <div class="meta">
                                <span>2022年9月5日</span>
                                                                    <span>82点热度</span>
                                                                                            </div>
                        </div>
                        <div class="content" id="lightgallery">
                            <div style="margin-bottom:5px"><a href="" target="_blank" rel="noreferrer"><img src=""></a></div><h2 ><a name="toc-1"></a><b style="font-size: 1rem;">参考文档：</b><br /></h2>
<div><span style="">&nbsp; &nbsp;&nbsp;</span><span style="">官方配置指南：</span><a href="https://guide.v2fly.org/advanced/wss_and_web.html" target="_blank"  rel="nofollow" >WebSocket + TLS + Web | 新 V2Ray 白话文指南 (v2fly.org)</a></div>
<div>&nbsp; &nbsp;&nbsp;GitHub：https://github.com/v2fly/v2ray-core</div>
<div>&nbsp; &nbsp;&nbsp;Docker：https://hub.docker.com/r/v2fly/v2fly-core</div>
<div><span style="">&nbsp; &nbsp;&nbsp;Docker：</span>https://hub.docker.com/r/teddysun/v2ray</div>
<div></div>
<div><b>步骤预览：</b></div>
<div>
<ul>
<li>容器.V2Ray配置后端WS协议（使用 WebSocket 是因为搭配 Nginx/Caddy/Apache 只能用 WebSocket）</li>
<li>宝塔.Nginx配置前端HTTPS（443端口）</li>
<li>开启BBR加速</li>
</ul>
</div>
<div></div>
<div></div>
<div><b>本教程说明：</b></div>
<div>&nbsp; &nbsp; 本方案的 TLS 的配置是写入 Nginx 配置中，由 Nginx 来监听 443 端口（443 比较常用，并非 443 不可），然后将流量转发到 V2Ray 的 WebSocket 所监听的内网端口（本例是 10000），V2Ray 服务器端不需要配置 TLS，且可以单独直连使用，即配置好后客户端支持两种握手方式：</div>
<div>
<div>
<ol class="wiz-list-level1">
<li>V2Ray客户端 和 V2Ray服务端 WebSocket (10000 端口）直接握手 。<span style=""><b>（方式简单，方便排错）</b></span></li>
<li>V2Ray客户端 和 Nginx（443 端口）通讯，Nginx 再转发给 V2Ray服务端 WebSocket (1000 端口）握手。<b style="">（进阶使用）</b></li>
</ol>
</div>
</div>
<div><b><br /></b></div>
<div><b>注意事项：</b></div>
<div>
<ul>
<li>V2现在强制启用了VMessAEAD，V2Ray的 config.json 中 ”alterId”现在必须是“0”。</li>
<li>V2Ray 自 4.18.1 后支持 TLS1.3，如果开启并强制 TLS1.3 请注意 v2ray 客户端版本.</li>
<li>请保持服务器和客户端的 wsSettings 严格一致，对于 V2Ray，/ray 和 /ray/ 是不一样的（较低版本的 nginx 的 location 需要写为 /ray/ 才能正常工作）</li>
</ul>
<div></div>
<div><b>其他说明：</b></div>
</div>
<div>
<ul>
<li>开启了 TLS 之后 path 参数是被加密的，GFW 看不到；</li>
<li>主动探测一个 path 产生 Bad request 不能证明是 V2Ray；</li>
<li>使用 Header 分流并不比 path 安全， 不要迷信。&nbsp;&nbsp;</li>
<li>默认支持IPv6。</li>
<li>务必开启BBR（甲骨文Ubuntu），否则Y2B速度只有120K~200K，无法流畅播放1080视频，开启BBR后（无需重启VPS）则Y2B速度提升到400K~1MB，可以流畅播放1080p（2022-09-04 19:56）</li>
</ul>
<div>
<div><span style=""><br /></span></div>
<h2 ><a name="toc-2"></a><span style="">开始&nbsp;&nbsp;</span></h2>
</div>
</div>
<h2 ><a name="toc-3"></a>V2Ray配置后端WS协议</h2>
<div></div>
<div>&nbsp; &nbsp; <b>服务器 V2Ray 配置</b></div>
<div>
<ul>
<li>Linux生成随机uuid：cat /proc/sys/kernel/random/uuid</li>
<li>服务端 V2Ray 的配置文件：<span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0);">v2fly.json</span>
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628d3569746364" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
  "inbounds": [
    {
      "port": 10000,
      "listen":"127.0.0.1",//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口
      "protocol": "vmess",
      "settings": {
        "clients": [
          {
            "id": "12345678-1234-1234-1234-123456789012",//替换成自己的uuid
            "alterId": 0
          }
        ]
      },
      "streamSettings": {
        "network": "ws",
        "wsSettings": {
        "path": "/fly/"     /*自定义路径*/
        }
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom",
      "settings": {}
    }
  ]
}</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628d3569746364-29">29</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-1"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"inbounds"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"port"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10000</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"listen"</span><span class="crayon-o">:</span><span class="crayon-s">"127.0.0.1"</span><span class="crayon-sy">,</span><span class="crayon-c">//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"protocol"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"vmess"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"settings"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"clients"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"12345678-1234-1234-1234-123456789012"</span><span class="crayon-sy">,</span><span class="crayon-c">//替换成自己的uuid</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"alterId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"streamSettings"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"network"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"ws"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"wsSettings"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"path"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"/fly/"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">/*自定义路径*/</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-22"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-23"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"outbounds"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"protocol"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"freedom"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"settings"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-28"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628d3569746364-29"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
</div>
</div>
</li>
</ul>
</div>
<div></div>
<div><span style="">&nbsp; &nbsp;&nbsp;</span><b>Docker容器配置V2Ray</b></div>
<div>
<ul>
<li>Docker配置文件：<span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0);">v2fly.yml</span>
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628da558927581" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#[2022-09-05]
version: '3.7'
services:
  v2fly:    #服务名.不可与其他容器重复
    container_name: v2fly   #容器名.不可与其他容器重复
    image: v2fly/v2fly-core
    restart: unless-stopped
    user: "root:root"
    volumes:
      - ./v2fly.json:/etc/v2ray/config.json
    network_mode: "host"    #主机模式.无需预先映射端口</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628da558927581-11">11</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-1"><span class="crayon-p">#[2022-09-05]</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628da558927581-2"><span class="crayon-v">version</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'3.7'</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-3"><span class="crayon-v">services</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628da558927581-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">v2fly</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#服务名.不可与其他容器重复</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">container_name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">v2fly</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-p">#容器名.不可与其他容器重复</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628da558927581-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">image</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">v2fly</span><span class="crayon-o">/</span><span class="crayon-v">v2fly</span><span class="crayon-o">-</span><span class="crayon-e">core</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-7"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">restart</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">unless</span><span class="crayon-o">-</span><span class="crayon-e">stopped</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628da558927581-8"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">user</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"root:root"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">volumes</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628da558927581-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-v">v2fly</span><span class="crayon-sy">.</span><span class="crayon-v">json</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">v2ray</span><span class="crayon-o">/</span><span class="crayon-v">config</span><span class="crayon-sy">.</span><span class="crayon-e">json</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628da558927581-11"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">network_mode</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"host"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#主机模式.无需预先映射端口</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</div>
</div>
</li>
</ul>
</div>
<div>
<ul>
<li>运行容器：<span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0);">docker-compose -f v2fly.yml up -d</span></li>
</ul>
</div>
<div>&nbsp; &nbsp; <b>WebSocket配置完成！此时已经可以使用客户端V2Ray连接使用！</b></div>
<div>
<ul>
<li>V2Ray客户端配置信息范例&nbsp;<span style="">（</span>WebSocket直连10000端口）：
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628dc086833095" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
- {name: v2fly.ws直连, server: mydomain.me, port: 10000, type: vmess, uuid: 12345678-1234-1234-1234-123456789012, alterId: 0, cipher: auto, tls: false, skip-cert-verify: false, network: ws, ws-opts: {path: /fly/, headers: {Host: mydomain.me}}, udp: true}</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628dc086833095-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628dc086833095-1"><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">v2fly</span><span class="crayon-sy">.</span><span class="crayon-i">ws</span>直连<span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">server</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">mydomain</span><span class="crayon-sy">.</span><span class="crayon-v">me</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">port</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10000</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">vmess</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">uuid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">12345678</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">123456789012</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">alterId</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cipher</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">auto</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">tls</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">skip</span><span class="crayon-o">-</span><span class="crayon-v">cert</span><span class="crayon-o">-</span><span class="crayon-v">verify</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">network</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ws</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ws</span><span class="crayon-o">-</span><span class="crayon-v">opts</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">path</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">fly</span><span class="crayon-o">/</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">Host</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">mydomain</span><span class="crayon-sy">.</span><span class="crayon-v">me</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">udp</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
</div>
</div>
</li>
</ul>
</div>
<div><b><br /></b></div>
<h2 ><a name="toc-4"></a>Nginx配置前端HTTPS（443端口）</h2>
<div>&nbsp; &nbsp; - 参考.官方代码范例：<a href="https://guide.v2fly.org/advanced/wss_and_web.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE" target="_blank"  rel="nofollow" >WebSocket + TLS + Web | 新 V2Ray 白话文指南 (v2fly.org)</a></div>
<div>
<ul>
<li><span style="">宝塔中开启网站域名SSL。</span></li>
<li>将以下代码插入宝塔网站 Nginx配置文件 最末尾的 “}” 符号前：
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628de635059307" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
    #v2ray-WebSocket+TLS+Web
    location /fly/ {#与 V2Ray 配置中的 path 保持一致
        proxy_redirect off;
        proxy_pass http://127.0.0.1:10000;#假设WebSocket监听在环回地址的10000端口上
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $http_host;

        # Show realip in v2ray access.log
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628de635059307-13">13</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#v2ray-WebSocket+TLS+Web</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">location</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-e">fly</span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-p">#与 V2Ray 配置中的 path 保持一致</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">proxy_redirect </span><span class="crayon-v">off</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">proxy_pass </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:10000;#假设WebSocket监听在环回地址的10000端口上</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">proxy_http</span><span class="crayon-sy">_</span>version<span class="crayon-h"> </span><span class="crayon-cn">1.1</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">proxy_set_header </span><span class="crayon-i">Upgrade</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">http_upgrade</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">proxy_set_header </span><span class="crayon-i">Connection</span><span class="crayon-h"> </span><span class="crayon-s">"upgrade"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">proxy_set_header </span><span class="crayon-i">Host</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">http_host</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Show realip in v2ray access.log</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">proxy_set</span><span class="crayon-sy">_</span>header<span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-o">-</span><span class="crayon-v">Real</span><span class="crayon-o">-</span><span class="crayon-i">IP</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">remote_addr</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628de635059307-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">proxy_set</span><span class="crayon-sy">_</span>header<span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-o">-</span><span class="crayon-v">Forwarded</span><span class="crayon-o">-</span><span class="crayon-st">For</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">proxy_add_x_forwarded_for</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628de635059307-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</div>
</div>
</li>
</ul>
<div>&nbsp; &nbsp;&nbsp;<b>Nginx配置完成！至此V2Ray客户端可以使用443端口连接服务。</b>（宝塔修改配置后会自动重启Nginx生效，无需手动重启Nginx）</div>
</div>
<div>
<ul>
<li>V2Ray客户端配置信息范例 （TLS通过443端口）：
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628e0520316813" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
- {name: v2fly-WebSocket+TLS+Web, server: mydomain.me, port: 443, type: vmess, uuid: 12345678-1234-1234-1234-123456789012, alterId: 0, cipher: auto, tls: true, skip-cert-verify: false, network: ws, ws-opts: {path: /fly/, headers: {Host: mydomain.me}}, udp: true}</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e0520316813-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e0520316813-1"><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">v2fly</span><span class="crayon-o">-</span><span class="crayon-v">WebSocket</span><span class="crayon-o">+</span><span class="crayon-v">TLS</span><span class="crayon-o">+</span><span class="crayon-v">Web</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">server</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">mydomain</span><span class="crayon-sy">.</span><span class="crayon-v">me</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">port</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">443</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">vmess</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">uuid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">12345678</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">1234</span><span class="crayon-o">-</span><span class="crayon-cn">123456789012</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">alterId</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cipher</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">auto</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">tls</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">skip</span><span class="crayon-o">-</span><span class="crayon-v">cert</span><span class="crayon-o">-</span><span class="crayon-v">verify</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">network</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ws</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ws</span><span class="crayon-o">-</span><span class="crayon-v">opts</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">path</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">fly</span><span class="crayon-o">/</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">Host</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">mydomain</span><span class="crayon-sy">.</span><span class="crayon-v">me</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">udp</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
</div>
</div>
</li>
</ul>
</div>
<div></div>
<h2 ><a name="toc-5"></a>甲骨文Ubuntu开启BBR</h2>
<div>
<ul>
<li>检查BBR是否开启
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628e2197482058" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#第一项检查：
root@vps:~# sysctl net.ipv4.tcp_available_congestion_control | grep bbr
	#若已开启bbr，结果通常为以下两种：
	net.ipv4.tcp_available_congestion_control = bbr cubic reno
	net.ipv4.tcp_available_congestion_control = reno cubic bbr
#第二项检查：
root@vps:~# sysctl net.ipv4.tcp_congestion_control | grep bbr
	#若已开启bbr，结果如下：
	net.ipv4.tcp_congestion_control = bbr
#第三项检查：
	root@vps:~# sysctl net.core.default_qdisc | grep fq
	#若已开启bbr，结果如下：
	net.core.default_qdisc = fq
#第四项检查：
	root@vps:~# lsmod | grep bbr
	#若已开启bbr，结果可能如下。并不是所有的 VPS 都会有此返回值，若没有也属正常。
	tcp_bbr                20480  2</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e2197482058-17">17</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-1"><span class="crayon-p">#第一项检查：</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-2"><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">vps</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-p"># sysctl net.ipv4.tcp_available_congestion_control | grep bbr</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-3"><span class="crayon-h">	</span><span class="crayon-p">#若已开启bbr，结果通常为以下两种：</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-4"><span class="crayon-h">	</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ipv4</span><span class="crayon-sy">.</span><span class="crayon-v">tcp_available_congestion_control</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">bbr </span><span class="crayon-e">cubic </span><span class="crayon-e">reno</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-5"><span class="crayon-e">	</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ipv4</span><span class="crayon-sy">.</span><span class="crayon-v">tcp_available_congestion_control</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">reno </span><span class="crayon-e">cubic </span><span class="crayon-i">bbr</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-6"><span class="crayon-p">#第二项检查：</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-7"><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">vps</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-p"># sysctl net.ipv4.tcp_congestion_control | grep bbr</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-8"><span class="crayon-h">	</span><span class="crayon-p">#若已开启bbr，结果如下：</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-9"><span class="crayon-h">	</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ipv4</span><span class="crayon-sy">.</span><span class="crayon-v">tcp_congestion_control</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">bbr</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-10"><span class="crayon-p">#第三项检查：</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-11"><span class="crayon-h">	</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">vps</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-p"># sysctl net.core.default_qdisc | grep fq</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-12"><span class="crayon-h">	</span><span class="crayon-p">#若已开启bbr，结果如下：</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-13"><span class="crayon-h">	</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">core</span><span class="crayon-sy">.</span><span class="crayon-v">default_qdisc</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">fq</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-14"><span class="crayon-p">#第四项检查：</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-15"><span class="crayon-h">	</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">vps</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-p"># lsmod | grep bbr</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-16"><span class="crayon-h">	</span><span class="crayon-p">#若已开启bbr，结果可能如下。并不是所有的 VPS 都会有此返回值，若没有也属正常。</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e2197482058-17"><span class="crayon-h">	</span><span class="crayon-v">tcp</span><span class="crayon-sy">_</span>bbr<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">20480</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">2</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
</div>
</div>
</li>
</ul>
</div>
<div>
<div></div>
<div>
<ul>
<li>启用BBR（无需重启VPS，立即生效）
<div>
<div data-mode="JavaScript" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-631c927e628e4205540268" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
sudo bash -c 'echo "net.core.default_qdisc=fq" &gt;&gt; /etc/sysctl.conf'
sudo bash -c 'echo "net.ipv4.tcp_congestion_control=bbr" &gt;&gt; /etc/sysctl.conf'
sysctl -p
lsmod | grep bbr</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e4205540268-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e4205540268-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-631c927e628e4205540268-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-631c927e628e4205540268-4">4</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e4205540268-1"><span class="crayon-e">sudo </span><span class="crayon-v">bash</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-s">'echo "net.core.default_qdisc=fq" &gt;&gt; /etc/sysctl.conf'</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e4205540268-2"><span class="crayon-e">sudo </span><span class="crayon-v">bash</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-s">'echo "net.ipv4.tcp_congestion_control=bbr" &gt;&gt; /etc/sysctl.conf'</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-631c927e628e4205540268-3"><span class="crayon-v">sysctl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-631c927e628e4205540268-4"><span class="crayon-v">lsmod</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">grep </span><span class="crayon-v">bbr</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</div>
</div>
</li>
</ul>
</div>
</div>
<div><b style="">完成开启加速！</b></div>
<div></div>
                        </div>
                                                <div class="footer clearfix">
                            <div class="tags float-left">
                                <span>标签：</span>
                                <a>暂无</a>                            </div>
                            <div class="tool float-right d-none d-lg-block">
                                <span>最后更新：2022年9月5日</span>
                            </div>
                        </div>
                    </div>
                                <div class="toolbar clearfix">
	<div class="meta float-md-left">
		<img src="https://sdn.geekzu.org/avatar/8dc48ab2afc8d5058df4be411bc61a15?s=96&r=g">
		<p class="name">SSJ</p>
		<p class="motto mb-0">不积跬步无以至千里</p>
	</div>
	<div class="share float-md-right text-center">
				<a href="javascript:;" id="thumbs" data-action="love" data-id="2771" role="button" class="btn btn-thumbs "><i class="kicon i-like"></i><span class="ml-1">点赞</span></a>
	</div>
</div>
                <nav class="navigation post-navigation clearfix" role="navigation">
                    <div class="nav-previous clearfix"><a title="网络唤醒-Padavan-从互联网将局域网内的电脑远程开机" href="https://luojimen.github.io/2022/08/wake-on-network-padavan-remotely-boot-the-computer-in-the-lan-from-the-internet/">< 上一篇</a></div><div class="nav-next"><a title="Nginx反向代理TCP协议【反代SSH端口】" href="https://luojimen.github.io/2022/09/nginx-reverse-proxy-tcp-protocol-reverse-ssh-port/">下一篇 ></a></div>                </nav>
                            </div>
                    </div>
    </div>
</div>
<div class="k-footer">
    <div class="f-toolbox">
        <div class="gotop ">
            <div class="gotop-btn">
                <span class="kicon i-up"></span>
            </div>
        </div>
                <div class="search">
            <span class="kicon i-find"></span>
            <form class="search-form" role="search" method="get" action="https://luojimen.github.io/">
                <input type="text" name="s" id="search-footer" placeholder="搜点什么呢?" style="display:none" />
            </form>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <p class="social">
                                    </p>
                <p>COPYRIGHT © 2022 luoji.men. ALL RIGHTS RESERVED.</p><p>Theme <a href="https://github.com/seatonjiang/kratos" target="_blank" rel="nofollow">Kratos</a> Made By <a href="https://seatonjiang.com" target="_blank" rel="nofollow">Seaton Jiang</a></p><script></script>            </div>
        </div>
    </div>
</div>
<script type='text/javascript' id='urvanov_syntax_highlighter_js-js-extra'>
/* <![CDATA[ */
var UrvanovSyntaxHighlighterSyntaxSettings = {"version":"2.8.27","is_admin":"0","ajaxurl":"http:\/\/luojimen.github.io\/wp-admin\/admin-ajax.php","prefix":"urvanov-syntax-highlighter-","setting":"urvanov-syntax-highlighter-setting","selected":"urvanov-syntax-highlighter-setting-selected","changed":"urvanov-syntax-highlighter-setting-changed","special":"urvanov-syntax-highlighter-setting-special","orig_value":"data-orig-value","debug":""};
var UrvanovSyntaxHighlighterSyntaxStrings = {"copy":"Copied to the clipboard","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='https://luojimen.github.io/wp-content/plugins/urvanov-syntax-highlighter/js/min/urvanov_syntax_highlighter.min.js?ver=2.8.27' id='urvanov_syntax_highlighter_js-js'></script>
<script type='text/javascript' id='image-sizes-js-extra'>
/* <![CDATA[ */
var IMAGE_SIZES = {"version":"3.5","disables":["thumbnail","medium","medium_large","large","1536x1536","2048x2048","kratos-thumbnail"]};
/* ]]> */
</script>
<script type='text/javascript' src='https://luojimen.github.io/wp-content/plugins/image-sizes/assets/js/front.min.js?ver=3.5' id='image-sizes-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/bootstrap.bundle.min.js?ver=4.5.0' id='bootstrap-bundle-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/layer.min.js?ver=3.1.1' id='layer-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/DPlayer.min.js?ver=4.1.2' id='dplayer-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/lightgallery.min.js?ver=1.4.0' id='lightgallery-js'></script>
<script type='text/javascript' id='kratos-js-extra'>
/* <![CDATA[ */
var kratos = {"site":"http:\/\/luojimen.github.io","directory":"https:\/\/cdn.seatonjiang.com\/kratos\/4.1.2","alipay":"https:\/\/luojimen.github.io\/wp-content\/themes\/kratos-4.1.2\/assets\/img\/200.png","wechat":"https:\/\/luojimen.github.io\/wp-content\/themes\/kratos-4.1.2\/assets\/img\/200.png","repeat":"\u60a8\u5df2\u7ecf\u8d5e\u8fc7\u4e86","thanks":"\u611f\u8c22\u60a8\u7684\u652f\u6301","donate":"\u6253\u8d4f\u4f5c\u8005","scan":"\u626b\u7801\u652f\u4ed8"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/kratos.js?ver=4.1.2' id='kratos-js'></script>
<script type='text/javascript' id='comment-js-extra'>
/* <![CDATA[ */
var ajaxcomment = {"ajax_url":"http:\/\/luojimen.github.io\/wp-admin\/admin-ajax.php","order":"asc","compost":"\u8bc4\u8bba\u6b63\u5728\u63d0\u4ea4\u4e2d","comsucc":"\u8bc4\u8bba\u63d0\u4ea4\u6210\u529f"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/comments.min.js?ver=4.1.2' id='comment-js'></script>
<script type='text/javascript' src='http://push.zhanzhang.baidu.com/push.js?ver=6.0.2' id='baidu_zz_push-js'></script>
</body>

</html>
